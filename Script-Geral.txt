CREATE TABLE IF NOT EXISTS Pessoa (
  "pes_id" SERIAL PRIMARY KEY,
  "pes_nome" VARCHAR(45) NOT NULL,
  "pes_cidade" VARCHAR(45) NOT NULL,
  "pes_estado" VARCHAR(45) NOT NULL,
  "pes_endereco" VARCHAR(45) NOT NULL,
  "pes_telefone" VARCHAR(45) NOT NULL,
  "pes_bairro" VARCHAR(45) NOT NULL,
  "pes_cep" VARCHAR(45) NOT NULL,
  "pes_uf" VARCHAR(45) NOT NULL,
  "pes_email" VARCHAR(45) NOT NULL,
  "pes_url" VARCHAR(45) NOT NULL
);

CREATE TABLE IF NOT EXISTS Fisica (
  "fis_id" SERIAL PRIMARY KEY,
  "fis_cpf" VARCHAR(45) NOT NULL,
  "fis_dataNasc" DATE NOT NULL,
  "fis_estCivil" VARCHAR(45) NOT NULL,
  "fis_sexo" VARCHAR(45) NOT NULL,
  "Pessoa_pes_id" INT NOT NULL,
  FOREIGN KEY ("Pessoa_pes_id") REFERENCES Pessoa ("pes_id")
);

CREATE TABLE IF NOT EXISTS Juridica (
  "jur_id" SERIAL PRIMARY KEY,
  "jur_cnpj" VARCHAR(45) NOT NULL,
  "jur_razaoSocial" VARCHAR(45) NOT NULL,
  "Pessoa_pes_id" INT NOT NULL,
  FOREIGN KEY ("Pessoa_pes_id") REFERENCES Pessoa ("pes_id")
);

CREATE TABLE IF NOT EXISTS Cliente (
  "cli_id" SERIAL PRIMARY KEY,
  "cli_data" DATE NOT NULL,
  "Fisica_fis_id" INT,
  "Juridica_jur_id" INT,
  FOREIGN KEY ("Fisica_fis_id") REFERENCES Fisica ("fis_id"),
  FOREIGN KEY ("Juridica_jur_id") REFERENCES Juridica ("jur_id")
);

CREATE TABLE IF NOT EXISTS Funcionario (
  "func_id" SERIAL PRIMARY KEY,
  "func_cargo" VARCHAR(45) NOT NULL,
  "Fisica_fis_id" INT NOT NULL,
  FOREIGN KEY ("Fisica_fis_id") REFERENCES Fisica ("fis_id")
);

CREATE TABLE IF NOT EXISTS Contato (
  "cont_id" SERIAL PRIMARY KEY,
  "Pessoa_pes_id" INT NOT NULL,
  "cont_telefone" VARCHAR(45) NOT NULL,
  "cont_email" VARCHAR(45) NOT NULL,
  FOREIGN KEY ("Pessoa_pes_id") REFERENCES Pessoa ("pes_id")
);

CREATE TABLE IF NOT EXISTS Titulo (
  "tit_id" SERIAL PRIMARY KEY,
  "tit_nome" VARCHAR(45) NOT NULL,
  "tit_qtde" INT NOT NULL,
  "tit_edicao" INT NOT NULL,
  "tit_genero" VARCHAR(45) NOT NULL
);

CREATE TABLE IF NOT EXISTS Autor (
  "aut_id" SERIAL PRIMARY KEY,
  "aut_nome" VARCHAR(45) NOT NULL,
  "aut_nacionalidade" VARCHAR(45) NOT NULL,
  "aut_desc" VARCHAR(45) NOT NULL
);

CREATE TABLE IF NOT EXISTS Editora (
  "edit_id" SERIAL PRIMARY KEY,
  "edit_telefone" VARCHAR(45) NOT NULL,
  "edit_email" VARCHAR(45) NOT NULL,
  "edit_qtdeLivros" INT NOT NULL,
  "edit_end" VARCHAR(45) NOT NULL
);

CREATE TABLE IF NOT EXISTS Titulo_Autor (
  "Titulo_tit_id" INT NOT NULL,
  "Autor_aut_id" INT NOT NULL,
  PRIMARY KEY ("Titulo_tit_id", "Autor_aut_id"),
  FOREIGN KEY ("Titulo_tit_id") REFERENCES Titulo ("tit_id"),
  FOREIGN KEY ("Autor_aut_id") REFERENCES Autor ("aut_id")
);

CREATE TABLE IF NOT EXISTS Titulo_Editora (
  "Titulo_tit_id" INT NOT NULL,
  "Editora_edit_id" INT NOT NULL,
  PRIMARY KEY ("Titulo_tit_id", "Editora_edit_id"),
  FOREIGN KEY ("Titulo_tit_id") REFERENCES Titulo ("tit_id"),
  FOREIGN KEY ("Editora_edit_id") REFERENCES Editora ("edit_id")
);

CREATE TABLE IF NOT EXISTS Exemplar (
  "exe_id" SERIAL PRIMARY KEY,
  "exe_status" VARCHAR(45) NOT NULL,
  "exe_data_entrada" DATE NOT NULL,
  "Titulo_tit_id" INT NOT NULL,
  FOREIGN KEY ("Titulo_tit_id") REFERENCES Titulo ("tit_id")
);

CREATE TABLE IF NOT EXISTS Usuario (
  "Funcionario_func_id" INT NOT NULL,
  "usu_login" VARCHAR(45) NOT NULL,
  "usu_senha" VARCHAR(45) NOT NULL,
  "usu_data_perm" VARCHAR(45) NOT NULL,
  "usu_data_desativa" VARCHAR(45) NOT NULL,
  "usu_nivel" VARCHAR(45) NOT NULL,
  PRIMARY KEY ("Funcionario_func_id"),
  FOREIGN KEY ("Funcionario_func_id") REFERENCES Funcionario ("func_id")
);

CREATE TABLE IF NOT EXISTS Empréstimo (
  "emp_id" SERIAL PRIMARY KEY,
  "Cliente_cli_id" INT NOT NULL,
  "emp_data" DATE NOT NULL,
  "emp_prev_devolucao" DATE NOT NULL,
  "Usuario_Funcionario_func_id" INT NOT NULL,
  "empE_status" VARCHAR(45) NOT NULL,
  FOREIGN KEY ("Cliente_cli_id") REFERENCES Cliente ("cli_id"),
  FOREIGN KEY ("Usuario_Funcionario_func_id") REFERENCES Usuario ("Funcionario_func_id")
);

CREATE TABLE IF NOT EXISTS Emprestimo_Exemplar (
  "Empréstimo_emp_id" INT NOT NULL,
  "Exemplar_exe_id" INT NOT NULL,
  "empE_data_dvlv" DATE NOT NULL,
  PRIMARY KEY ("Empréstimo_emp_id", "Exemplar_exe_id"),
  FOREIGN KEY ("Empréstimo_emp_id") REFERENCES Empréstimo ("emp_id"),
  FOREIGN KEY ("Exemplar_exe_id") REFERENCES Exemplar ("exe_id")
);

CREATE TABLE IF NOT EXISTS Recebimento (
  "rec_id" SERIAL PRIMARY KEY,
  "rec_valor" DOUBLE PRECISION NOT NULL,
  "rec_data" DATE NOT NULL,
  "Empréstimo_emp_id" INT NOT NULL,
  "Usuario_Funcionario_func_id" INT NOT NULL,
  FOREIGN KEY ("Empréstimo_emp_id") REFERENCES Empréstimo ("emp_id"),
  FOREIGN KEY ("Usuario_Funcionario_func_id") REFERENCES Usuario ("Funcionario_func_id")
);

CREATE TABLE IF NOT EXISTS Renovação (
  "ren_id" SERIAL PRIMARY KEY,
  "Emprestimo_Exemplar_Empréstimo_emp_id" INT NOT NULL,
  "Emprestimo_Exemplar_Exemplar_exe_id" INT NOT NULL,
  "ren_data_prev_devolucao" DATE NOT NULL,
  "Usuario_Funcionario_func_id" INT NOT NULL,
  FOREIGN KEY ("Emprestimo_Exemplar_Empréstimo_emp_id", "Emprestimo_Exemplar_Exemplar_exe_id") REFERENCES Emprestimo_Exemplar ("Empréstimo_emp_id", "Exemplar_exe_id"),
  FOREIGN KEY ("Usuario_Funcionario_func_id") REFERENCES Usuario ("Funcionario_func_id")
);

CREATE TABLE IF NOT EXISTS Baixa (
  "baix_id" SERIAL PRIMARY KEY,
  "baix_motivo" VARCHAR(45) NOT NULL,
  "baix_desc" VARCHAR(45) NOT NULL,
  "baix_data" VARCHAR(45) NOT NULL,
  "Exemplar_exe_id" INT NOT NULL,
  "Usuario_Funcionario_func_id" INT NOT NULL,
  FOREIGN KEY ("Exemplar_exe_id") REFERENCES Exemplar ("exe_id"),
  FOREIGN KEY ("Usuario_Funcionario_func_id") REFERENCES Usuario ("Funcionario_func_id")
);

CREATE TABLE IF NOT EXISTS Selecao (
  "sel_id" SERIAL PRIMARY KEY,
  "Cliente_cli_id" INT NOT NULL,
  "Titulo_tit_id" INT NOT NULL,
  "Usuario_Funcionario_func_id" INT NOT NULL,
  FOREIGN KEY ("Cliente_cli_id") REFERENCES Cliente ("cli_id"),
  FOREIGN KEY ("Titulo_tit_id") REFERENCES Titulo ("tit_id"),
  FOREIGN KEY ("Usuario_Funcionario_func_id") REFERENCES Usuario ("Funcionario_func_id")
);

CREATE TABLE IF NOT EXISTS Reserva (
  "res_id" SERIAL PRIMARY KEY,
  "Titulo_tit_id" INT NOT NULL,
  "Cliente_cli_id" INT NOT NULL,
  "Usuario_Funcionario_func_id" INT NOT NULL,
  FOREIGN KEY ("Titulo_tit_id") REFERENCES Titulo ("tit_id"),
  FOREIGN KEY ("Cliente_cli_id") REFERENCES Cliente ("cli_id"),
  FOREIGN KEY ("Usuario_Funcionario_func_id") REFERENCES Usuario ("Funcionario_func_id")
);

CREATE TABLE IF NOT EXISTS SolicitarTitulo (
  "sTit_id" SERIAL PRIMARY KEY,
  "Funcionario_func_id" INT NOT NULL,
  "sTit_data" VARCHAR(45) NOT NULL,
  "sTit_obs" VARCHAR(45) NOT NULL,
  FOREIGN KEY ("Funcionario_func_id") REFERENCES Funcionario ("func_id")
);

CREATE TABLE IF NOT EXISTS Item_Solicitacao (
  "itS_id" INT NOT NULL,
  "SolicitarTitulo_sTit_id" INT NOT NULL,
  "Titulo_tit_id" INT NOT NULL,
  "itS_quantidade" VARCHAR(45) NOT NULL,
  PRIMARY KEY ("itS_id", "SolicitarTitulo_sTit_id", "Titulo_tit_id"),
  FOREIGN KEY ("SolicitarTitulo_sTit_id") REFERENCES SolicitarTitulo ("sTit_id"),
  FOREIGN KEY ("Titulo_tit_id") REFERENCES Titulo ("tit_id")
);

CREATE TABLE IF NOT EXISTS Pedido (
  "ped_id" SERIAL PRIMARY KEY,
  "Juridica_jur_id" INT NOT NULL,
  "ped_data" DATE NOT NULL,
  "ped_data_entrega" VARCHAR(45) NOT NULL,
  FOREIGN KEY ("Juridica_jur_id") REFERENCES Juridica ("jur_id")
);

CREATE TABLE IF NOT EXISTS Comprar (
  "comp_id" SERIAL PRIMARY KEY,
  "Pedido_ped_id" INT NOT NULL,
  "comp_data" DATE NOT NULL,
  "comp_nota" VARCHAR(45) NOT NULL,
  "comp_valorTot" DOUBLE PRECISION NOT NULL,
  "comp_forma_pagamento" VARCHAR(45) NOT NULL,
  "Usuario_Funcionario_func_id" INT NOT NULL,
  FOREIGN KEY ("Pedido_ped_id") REFERENCES Pedido ("ped_id"),
  FOREIGN KEY ("Usuario_Funcionario_func_id") REFERENCES Usuario ("Funcionario_func_id")
);

CREATE TABLE IF NOT EXISTS Item_Pedido (
  "Pedido_ped_id" INT NOT NULL,
  "Titulo_tit_id" INT NOT NULL,
  "itP_qtde" INT NULL,
  PRIMARY KEY ("Pedido_ped_id", "Titulo_tit_id"),
  FOREIGN KEY ("Pedido_ped_id") REFERENCES Pedido ("ped_id"),
  FOREIGN KEY ("Titulo_tit_id") REFERENCES Titulo ("tit_id")
);

CREATE TABLE IF NOT EXISTS Item_Compra (
  "EntradaPedidos_entPed_id" INT NOT NULL,
  "Item_Pedido_Pedido_ped_id" INT NOT NULL,
  "Item_Pedido_Titulo_tit_id" INT NOT NULL,
  "itC_qtde" VARCHAR(45) NOT NULL,
  "itC_valor" VARCHAR(45) NOT NULL,
  PRIMARY KEY ("EntradaPedidos_entPed_id", "Item_Pedido_Pedido_ped_id", "Item_Pedido_Titulo_tit_id"),
  FOREIGN KEY ("EntradaPedidos_entPed_id") REFERENCES Comprar ("comp_id"),
  FOREIGN KEY ("Item_Pedido_Pedido_ped_id", "Item_Pedido_Titulo_tit_id") REFERENCES Item_Pedido ("Pedido_ped_id", "Titulo_tit_id")
);

CREATE TABLE IF NOT EXISTS Encomenda_Titulo (
  "Pedido_ped_id" INT NOT NULL,
  "SolicitarTitulo_sTit_id" INT NOT NULL,
  PRIMARY KEY ("Pedido_ped_id", "SolicitarTitulo_sTit_id"),
  FOREIGN KEY ("Pedido_ped_id") REFERENCES Pedido ("ped_id"),
  FOREIGN KEY ("SolicitarTitulo_sTit_id") REFERENCES SolicitarTitulo ("sTit_id")
);

CREATE TABLE IF NOT EXISTS Parametrizacao (
);
